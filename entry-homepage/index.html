<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Entries</title>
  <link rel="stylesheet" href="../styles.css">

</head>
<body>
  <a href="../index.html">← Back to homepage</a>
  <main class="entries">
    <h1>Entries</h1>
    <a class="entry-btn" href="../entry-1/index.html">Entry 1</a>
    <a class="entry-btn" href="../entry-2/index.html">Entry 2</a>
    <a class="entry-btn" href="../entry-3/index.html">Entry 3</a>
    <a class="entry-btn" href="../entry-4/index.html">Entry 4</a>
  </main>
  <!-- Hidden background audio to continue playback after navigation from homepage -->
  <audio id="bg-audio" loop muted preload="auto" class="hidden-audio">
    <source src="../audio/SpotiDownloader.com - Rencontre 2014 - Bertrand Bonello.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    (function(){
      const audio = document.getElementById('bg-audio');
      try{
        const started = sessionStorage.getItem('bgPlay');
        if(started && audio){
          // try to play muted (some browsers require gesture), then unmute on first gesture
          audio.volume = 0.8;
          audio.play().catch(()=>{});
          // unmute on first gesture so it's audible
          function unmute(){ audio.muted = false; audio.play().catch(()=>{}); document.removeEventListener('click', unmute); }
          document.addEventListener('click', unmute, {once:true});
        }
      }catch(e){ console.warn(e); }
    })();
  </script>
  <!-- Mute / Unmute floating control -->
  <div class="audio-toggle" aria-hidden="false">
    <button id="global-audio-toggle" title="Toggle audio">🔈</button>
  </div>

  <script>
    (function(){
      const btn = document.getElementById('global-audio-toggle');
      const audio = document.getElementById('bg-audio');
      if(!btn) return;
      function update(){
        try{ const muted = sessionStorage.getItem('bgMuted') === '1'; btn.textContent = muted ? '🔇' : '🔈'; }catch(e){}
      }
      btn.addEventListener('click', function(){
        try{
          const muted = sessionStorage.getItem('bgMuted') === '1';
          const newMuted = !muted;
          sessionStorage.setItem('bgMuted', newMuted ? '1' : '0');
          if(audio){ audio.muted = newMuted; if(!newMuted) audio.play().catch(()=>{}); }
          update();
        }catch(e){ console.warn(e); }
      });
      try{ const muted = sessionStorage.getItem('bgMuted') === '1'; if(audio) audio.muted = muted; update(); }catch(e){}
    })();
  </script>
</body>
</html>
